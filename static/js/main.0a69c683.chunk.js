(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{15:function(e,t,a){e.exports={ImageGalleryItem:"ImageGalleryItem_ImageGalleryItem__3CvRl",ImageGalleryItemImage:"ImageGalleryItem_ImageGalleryItemImage__2bkPr"}},16:function(e,t,a){e.exports={Overlay:"Modal_Overlay__2AxMb",Modal:"Modal_Modal__2WBTT"}},27:function(e,t,a){e.exports={ImageGallery:"ImageGallery_ImageGallery__DncjJ"}},29:function(e,t,a){e.exports={Button:"Button_Button__3R1xi"}},35:function(e,t,a){},36:function(e,t,a){},77:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(11),o=a.n(c),s=(a(35),a(4)),i=a(5),l=a(7),u=a(6),h=(a(36),a(26)),g=a(8),p=a.n(g),m=a(0),d=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={searchValue:"",perPage:12},e.handleSearchChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(h.a)({},n,r))},e.handleSearchSubmit=function(t){t.preventDefault(),e.props.getSearchValues(e.state.searchValue,e.state.perPage),e.setState({searchValue:"",perPage:12})},e}return Object(i.a)(a,[{key:"render",value:function(){return Object(m.jsx)("header",{className:p.a.Searchbar,children:Object(m.jsxs)("form",{className:p.a.SearchForm,onSubmit:this.handleSearchSubmit,children:[Object(m.jsx)("button",{type:"submit",className:p.a.SearchFormButton,children:Object(m.jsx)("span",{className:p.a.SearchFormButtonLabel,children:"Search"})}),Object(m.jsx)("input",{className:p.a.SearchFormInput,type:"text",name:"searchValue",value:this.state.searchValue,onChange:this.handleSearchChange,autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos"})]})})}}]),a}(n.Component),b=a(17),j=a(27),f=a.n(j),y=a(13),O=a.n(y),v=a(28),_=a(14),S=a.n(_),k=function(){function e(t,a){Object(s.a)(this,e),this.base_url=t,this.api_key=a,this._query="",this._page=1,this._perPage=12,this.endPoint=""}return Object(i.a)(e,[{key:"searchQuery",get:function(){return this._query},set:function(e){return this._query=e}},{key:"page",get:function(){return this._page},set:function(e){return this._page+=e}},{key:"resetPage",value:function(){return this._page=1}},{key:"perPage",get:function(){return this._perPage},set:function(e){return this._perPage=e}},{key:"searchPhotos",value:function(){var e=Object(v.a)(O.a.mark((function e(){var t,a,n,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S.a.defaults.baseURL=this.base_url,t="?key=".concat(this.api_key,"&q=").concat(this.query,"&page=").concat(this.page,"&per_page=").concat(this.perPage),a=this.endPoint+t,e.prev=3,e.next=6,S.a.get(a);case 6:return n=e.sent,r=n.data.hits,e.abrupt("return",r);case 11:return e.prev=11,e.t0=e.catch(3),e.abrupt("return",e.t0.message);case 14:case"end":return e.stop()}}),e,this,[[3,11]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),I=a(15),x=a.n(I),C=function(e){var t=e.image,a=e.onImageClick;return Object(m.jsx)("li",{className:x.a.ImageGalleryItem,children:Object(m.jsx)("img",{src:t.webformatURL,alt:t.tags,className:x.a.ImageGalleryItemImage,onClick:function(){return a(t.largeImageURL)}})},t.id)},P=a(29),w=a.n(P),B=function(e){var t=e.onClick;return Object(m.jsx)("div",{className:"container",children:Object(m.jsx)("button",{type:"button",className:w.a.Button,onClick:t,children:"load more"})})},M=new k("https://pixabay.com/api/","23194515-4229c06a71e7a36cb0b196559"),V=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={searchResults:[]},e.handleClick=function(){M.page=1,M.searchPhotos().then((function(t){e.setState((function(e){return{searchResults:[].concat(Object(b.a)(e.searchResults),Object(b.a)(t))}}))})).catch((function(e){console.log(e)}))},e.scrollToBottom=function(){setTimeout((function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})}))},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(e,t){var a=this;e.searchValue===this.props.searchValue&&e.perPage===this.props.perPage||(M.resetPage(),M.query=this.props.searchValue,M.perPage=this.props.perPage,M.searchPhotos().then((function(e){a.setState({searchResults:e})})).catch((function(e){console.log(e)}))),1!==M.page&&this.scrollToBottom()}},{key:"render",value:function(){var e=this,t=this.state.searchResults;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("ul",{className:f.a.ImageGallery,children:t.map((function(t){return Object(m.jsx)(C,{image:t,src:t.largeImageURL,onImageClick:e.props.onImageClick},t.id)}))}),t.length>=12&&Object(m.jsx)(B,{onClick:this.handleClick})]})}}]),a}(n.Component),F=a(16),L=a.n(F),N=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).handleEscape=function(t){"Escape"===t.code&&e.props.toggleModal()},e.handleClose=function(t){t.currentTarget===t.target&&e.props.toggleModal()},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleEscape)}},{key:"componentDidUpdate",value:function(e,t){}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleEscape)}},{key:"render",value:function(){var e=this.props.children;return Object(c.createPortal)(Object(m.jsx)("div",{className:L.a.Overlay,onClick:this.handleClose,children:Object(m.jsx)("div",{className:L.a.Modal,children:e})}),document.getElementById("modalRoot"))}}]),a}(n.Component),G=a(30),R=a.n(G),E=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return Object(m.jsx)(R.a,{className:"container",type:"Grid",color:"#3f51b5",height:100,width:100,timeout:3e3})}}]),a}(n.Component),D=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={images:[],searchValue:"",largeImage:"",perPage:12,showModal:!1,isLoading:!1},e.toggleModal=function(){e.setState({showModal:!e.state.showModal})},e.onImageClick=function(t){e.setState({largeImage:t}),e.toggleModal()},e.getSearchValues=function(t,a){e.setState({searchValue:t,perPage:a,isLoading:!e.state.isLoading})},e}return Object(i.a)(a,[{key:"componentDidUpdate",value:function(e,t){t.images!==this.state.images&&this.setState(this.state.images)}},{key:"render",value:function(){var e=this.state,t=e.searchValue,a=e.perPage,n=e.showModal,r=e.largeImage,c=e.isLoading;return Object(m.jsxs)("div",{className:"App",children:[Object(m.jsx)(d,{getSearchValues:this.getSearchValues}),c&&Object(m.jsx)(E,{}),Object(m.jsx)(V,{searchValue:t,perPage:a,onImageClick:this.onImageClick}),n&&Object(m.jsx)(N,{toggleModal:this.toggleModal,children:Object(m.jsx)("img",{src:r,alt:""})})]})}}]),a}(n.Component),U=D;o.a.render(Object(m.jsx)(r.a.StrictMode,{children:Object(m.jsx)(U,{})}),document.getElementById("root"))},8:function(e,t,a){e.exports={Searchbar:"SearchBar_Searchbar__LuSsJ",SearchForm:"SearchBar_SearchForm__1OsD8",SearchFormButton:"SearchBar_SearchFormButton__1hCEk",SearchFormButtonLabel:"SearchBar_SearchFormButtonLabel__2pz7t",SearchFormInput:"SearchBar_SearchFormInput__3xRsP"}}},[[77,1,2]]]);
//# sourceMappingURL=main.0a69c683.chunk.js.map